<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>uStepper: uStepperEncoder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">uStepper
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classuStepperEncoder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">uStepperEncoder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Prototype of class for the AS5600 encoder.  
 <a href="classuStepperEncoder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="uStepper_8h_source.html">uStepper.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab9c80a99fca938eeb490e4ed8d109f04"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#ab9c80a99fca938eeb490e4ed8d109f04">uStepperEncoder</a> (void)</td></tr>
<tr class="memdesc:ab9c80a99fca938eeb490e4ed8d109f04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ab9c80a99fca938eeb490e4ed8d109f04">More...</a><br /></td></tr>
<tr class="separator:ab9c80a99fca938eeb490e4ed8d109f04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf760d7949e75977bf11bce48256283c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#abf760d7949e75977bf11bce48256283c">getAngle</a> (void)</td></tr>
<tr class="memdesc:abf760d7949e75977bf11bce48256283c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measure the current shaft angle.  <a href="#abf760d7949e75977bf11bce48256283c">More...</a><br /></td></tr>
<tr class="separator:abf760d7949e75977bf11bce48256283c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8812beadc9bec6f4e321d281d9b6ea79"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#a8812beadc9bec6f4e321d281d9b6ea79">getSpeed</a> (void)</td></tr>
<tr class="memdesc:a8812beadc9bec6f4e321d281d9b6ea79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measure the current speed of the motor.  <a href="#a8812beadc9bec6f4e321d281d9b6ea79">More...</a><br /></td></tr>
<tr class="separator:a8812beadc9bec6f4e321d281d9b6ea79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26b81725b7a995fed98de0fcdd614b1f"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#a26b81725b7a995fed98de0fcdd614b1f">getStrength</a> (void)</td></tr>
<tr class="memdesc:a26b81725b7a995fed98de0fcdd614b1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measure the strength of the magnet.  <a href="#a26b81725b7a995fed98de0fcdd614b1f">More...</a><br /></td></tr>
<tr class="separator:a26b81725b7a995fed98de0fcdd614b1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a4a9e8dab1412c67de52b4454050d3e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#a8a4a9e8dab1412c67de52b4454050d3e">getAgc</a> (void)</td></tr>
<tr class="memdesc:a8a4a9e8dab1412c67de52b4454050d3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the current AGC value of the encoder chip.  <a href="#a8a4a9e8dab1412c67de52b4454050d3e">More...</a><br /></td></tr>
<tr class="separator:a8a4a9e8dab1412c67de52b4454050d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a990203acc3069947412e0a9dd36bc988"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#a990203acc3069947412e0a9dd36bc988">detectMagnet</a> (void)</td></tr>
<tr class="memdesc:a990203acc3069947412e0a9dd36bc988"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detect if magnet is present and within range.  <a href="#a990203acc3069947412e0a9dd36bc988">More...</a><br /></td></tr>
<tr class="separator:a990203acc3069947412e0a9dd36bc988"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29117f4952ff99ba53b90b842f4e69f1"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#a29117f4952ff99ba53b90b842f4e69f1">getAngleMoved</a> (void)</td></tr>
<tr class="memdesc:a29117f4952ff99ba53b90b842f4e69f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measure the angle moved from reference position.  <a href="#a29117f4952ff99ba53b90b842f4e69f1">More...</a><br /></td></tr>
<tr class="separator:a29117f4952ff99ba53b90b842f4e69f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75fd4d246e168c47c06f4e7ec8f124c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#a75fd4d246e168c47c06f4e7ec8f124c4">setup</a> (uint8_t mode)</td></tr>
<tr class="memdesc:a75fd4d246e168c47c06f4e7ec8f124c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup the encoder.  <a href="#a75fd4d246e168c47c06f4e7ec8f124c4">More...</a><br /></td></tr>
<tr class="separator:a75fd4d246e168c47c06f4e7ec8f124c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf3fc82540c092e8a6c68d4580bedbf9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#abf3fc82540c092e8a6c68d4580bedbf9">setHome</a> (void)</td></tr>
<tr class="memdesc:abf3fc82540c092e8a6c68d4580bedbf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define new reference(home) position.  <a href="#abf3fc82540c092e8a6c68d4580bedbf9">More...</a><br /></td></tr>
<tr class="separator:abf3fc82540c092e8a6c68d4580bedbf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a0156342c81b94ab3f7ef176494205f65"><td class="memItemLeft" align="right" valign="top">volatile int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#a0156342c81b94ab3f7ef176494205f65">angleMoved</a></td></tr>
<tr class="separator:a0156342c81b94ab3f7ef176494205f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a602c25ed26a1d3b48ba2215a40b0edd8"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#a602c25ed26a1d3b48ba2215a40b0edd8">encoderOffset</a></td></tr>
<tr class="separator:a602c25ed26a1d3b48ba2215a40b0edd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a479c3f88c98766f1df30eea67b907c6f"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#a479c3f88c98766f1df30eea67b907c6f">oldAngle</a></td></tr>
<tr class="separator:a479c3f88c98766f1df30eea67b907c6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae19871928f7fbe4a1b69270a8cec7932"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#ae19871928f7fbe4a1b69270a8cec7932">angle</a></td></tr>
<tr class="separator:ae19871928f7fbe4a1b69270a8cec7932"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eea748427c45b7792c61b0e44821abe"><td class="memItemLeft" align="right" valign="top">volatile int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#a1eea748427c45b7792c61b0e44821abe">revolutions</a></td></tr>
<tr class="separator:a1eea748427c45b7792c61b0e44821abe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe0647659291c6ed4f4104e95f5ae047"><td class="memItemLeft" align="right" valign="top">volatile float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#afe0647659291c6ed4f4104e95f5ae047">curSpeed</a></td></tr>
<tr class="separator:afe0647659291c6ed4f4104e95f5ae047"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a7256dda9d6a2decb036f1b853f2ce000"><td class="memItemLeft" align="right" valign="top"><a id="a7256dda9d6a2decb036f1b853f2ce000"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>used</b></td></tr>
<tr class="separator:a7256dda9d6a2decb036f1b853f2ce000"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bc7a9f474f12ea128e6ea6fde8382a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classuStepperEncoder.html#a8bc7a9f474f12ea128e6ea6fde8382a5">TIMER1_COMPA_vect</a> (void) __attribute__((signal</td></tr>
<tr class="memdesc:a8bc7a9f474f12ea128e6ea6fde8382a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measures angle and speed of motor.  <a href="#a8bc7a9f474f12ea128e6ea6fde8382a5">More...</a><br /></td></tr>
<tr class="separator:a8bc7a9f474f12ea128e6ea6fde8382a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Prototype of class for the AS5600 encoder. </p>
<p>This class enables the user of the library to access the AS5600 encoder on the <a class="el" href="classuStepper.html" title="Prototype of class for accessing all features of the uStepper in a single object. ...">uStepper</a> board. This class can be instantiated as a standalone object if all the features of the <a class="el" href="classuStepper.html" title="Prototype of class for accessing all features of the uStepper in a single object. ...">uStepper</a> is not needed by the programmers specific application. </p>

<p class="definition">Definition at line <a class="el" href="uStepper_8h_source.html#l00448">448</a> of file <a class="el" href="uStepper_8h_source.html">uStepper.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab9c80a99fca938eeb490e4ed8d109f04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9c80a99fca938eeb490e4ed8d109f04">&#9670;&nbsp;</a></span>uStepperEncoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uStepperEncoder::uStepperEncoder </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>This is the constructor of the <a class="el" href="classuStepperEncoder.html" title="Prototype of class for the AS5600 encoder. ">uStepperEncoder</a> class. </p>

<p class="definition">Definition at line <a class="el" href="uStepper_8cpp_source.html#l00680">680</a> of file <a class="el" href="uStepper_8cpp_source.html">uStepper.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a990203acc3069947412e0a9dd36bc988"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a990203acc3069947412e0a9dd36bc988">&#9670;&nbsp;</a></span>detectMagnet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t uStepperEncoder::detectMagnet </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detect if magnet is present and within range. </p>
<p>This function detects whether the magnet is present, too strong or too weak.</p>
<dl class="section return"><dt>Returns</dt><dd>0 - Magnet detected and within limits </dd>
<dd>
1 - Magnet too strong </dd>
<dd>
2 - Magnet too weak </dd></dl>

<p class="definition">Definition at line <a class="el" href="uStepper_8cpp_source.html#l00755">755</a> of file <a class="el" href="uStepper_8cpp_source.html">uStepper.cpp</a>.</p>

</div>
</div>
<a id="a8a4a9e8dab1412c67de52b4454050d3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a4a9e8dab1412c67de52b4454050d3e">&#9670;&nbsp;</a></span>getAgc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t uStepperEncoder::getAgc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the current AGC value of the encoder chip. </p>
<p>This function returns the current value of the AGC register in the encoder chip (AS5600). This value ranges between 0 and 255, and should preferably be as close to 128 as possible.</p>
<dl class="section return"><dt>Returns</dt><dd>current AGC value </dd></dl>

<p class="definition">Definition at line <a class="el" href="uStepper_8cpp_source.html#l00746">746</a> of file <a class="el" href="uStepper_8cpp_source.html">uStepper.cpp</a>.</p>

</div>
</div>
<a id="abf760d7949e75977bf11bce48256283c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf760d7949e75977bf11bce48256283c">&#9670;&nbsp;</a></span>getAngle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float uStepperEncoder::getAngle </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Measure the current shaft angle. </p>
<p>This function reads the current angle of the motor shaft. The resolution of the angle returned by this function is 0.087890625 degrees (12 bits) The Angle is read by means of the I2C interface, using the I2C interface implemented in this library.</p>
<dl class="section return"><dt>Returns</dt><dd>Floating point representation of the current motor shaft angle </dd></dl>

<p class="definition">Definition at line <a class="el" href="uStepper_8cpp_source.html#l00732">732</a> of file <a class="el" href="uStepper_8cpp_source.html">uStepper.cpp</a>.</p>

</div>
</div>
<a id="a29117f4952ff99ba53b90b842f4e69f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29117f4952ff99ba53b90b842f4e69f1">&#9670;&nbsp;</a></span>getAngleMoved()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float uStepperEncoder::getAngleMoved </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Measure the angle moved from reference position. </p>
<p>This function measures the angle moved from the shaft reference position. When the <a class="el" href="classuStepper.html" title="Prototype of class for accessing all features of the uStepper in a single object. ...">uStepper</a> is first powered on, the reference position is reset to the current shaft position, meaning that this function will return the angle rotated with respect to the angle the motor initially had. It should be noted that this function is absolute to an arbitrary number of revolutions !</p>
<p>The reference position can be reset at any point in time, by use of the <a class="el" href="classuStepperEncoder.html#abf3fc82540c092e8a6c68d4580bedbf9" title="Define new reference(home) position. ">setHome()</a> function.</p>
<dl class="section return"><dt>Returns</dt><dd>The angle moved. </dd></dl>

<p class="definition">Definition at line <a class="el" href="uStepper_8cpp_source.html#l00685">685</a> of file <a class="el" href="uStepper_8cpp_source.html">uStepper.cpp</a>.</p>

</div>
</div>
<a id="a8812beadc9bec6f4e321d281d9b6ea79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8812beadc9bec6f4e321d281d9b6ea79">&#9670;&nbsp;</a></span>getSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float uStepperEncoder::getSpeed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Measure the current speed of the motor. </p>
<p>This function returns the current speed of the motor. The speed is not calculated in this function, it is merely returning a variable. The speed is calculated in the interrupt routine associated with timer1.</p>
<dl class="section return"><dt>Returns</dt><dd>Current speed in revolutions per second (RPS) </dd></dl>

<p class="definition">Definition at line <a class="el" href="uStepper_8cpp_source.html#l00690">690</a> of file <a class="el" href="uStepper_8cpp_source.html">uStepper.cpp</a>.</p>

</div>
</div>
<a id="a26b81725b7a995fed98de0fcdd614b1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26b81725b7a995fed98de0fcdd614b1f">&#9670;&nbsp;</a></span>getStrength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t uStepperEncoder::getStrength </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Measure the strength of the magnet. </p>
<p>This function returns the strength of the magnet</p>
<dl class="section return"><dt>Returns</dt><dd>Strength of magnet </dd></dl>

<p class="definition">Definition at line <a class="el" href="uStepper_8cpp_source.html#l00737">737</a> of file <a class="el" href="uStepper_8cpp_source.html">uStepper.cpp</a>.</p>

</div>
</div>
<a id="abf3fc82540c092e8a6c68d4580bedbf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf3fc82540c092e8a6c68d4580bedbf9">&#9670;&nbsp;</a></span>setHome()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uStepperEncoder::setHome </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define new reference(home) position. </p>
<p>This function redefines the reference position to the current angle of the shaft </p>

<p class="definition">Definition at line <a class="el" href="uStepper_8cpp_source.html#l00717">717</a> of file <a class="el" href="uStepper_8cpp_source.html">uStepper.cpp</a>.</p>

</div>
</div>
<a id="a75fd4d246e168c47c06f4e7ec8f124c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75fd4d246e168c47c06f4e7ec8f124c4">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uStepperEncoder::setup </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup the encoder. </p>
<p>This function initializes all the encoder features.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Variable to indicate if the <a class="el" href="classuStepper.html" title="Prototype of class for accessing all features of the uStepper in a single object. ...">uStepper</a> is in normal or drop-in mode </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="uStepper_8cpp_source.html#l00695">695</a> of file <a class="el" href="uStepper_8cpp_source.html">uStepper.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a8bc7a9f474f12ea128e6ea6fde8382a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bc7a9f474f12ea128e6ea6fde8382a5">&#9670;&nbsp;</a></span>TIMER1_COMPA_vect</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TIMER1_COMPA_vect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Measures angle and speed of motor. </p>
<p>This interrupt routine is in charge of sampling the encoder and measure the current speed of the motor. In case of Dropin or PID feature this routine runs at a frequency of 500Hz while during normal operation it runs at a frequency of 1kHz. </p>

<p class="definition">Definition at line <a class="el" href="uStepper_8cpp_source.html#l00271">271</a> of file <a class="el" href="uStepper_8cpp_source.html">uStepper.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae19871928f7fbe4a1b69270a8cec7932"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae19871928f7fbe4a1b69270a8cec7932">&#9670;&nbsp;</a></span>angle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t uStepperEncoder::angle</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This variable always contain the current rotor angle, relative to a single revolution </p>

<p class="definition">Definition at line <a class="el" href="uStepper_8h_source.html#l00465">465</a> of file <a class="el" href="uStepper_8h_source.html">uStepper.h</a>.</p>

</div>
</div>
<a id="a0156342c81b94ab3f7ef176494205f65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0156342c81b94ab3f7ef176494205f65">&#9670;&nbsp;</a></span>angleMoved</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int32_t uStepperEncoder::angleMoved</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Variable used to store that measured angle moved from the reference position </p>

<p class="definition">Definition at line <a class="el" href="uStepper_8h_source.html#l00453">453</a> of file <a class="el" href="uStepper_8h_source.html">uStepper.h</a>.</p>

</div>
</div>
<a id="afe0647659291c6ed4f4104e95f5ae047"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe0647659291c6ed4f4104e95f5ae047">&#9670;&nbsp;</a></span>curSpeed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile float uStepperEncoder::curSpeed</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Variable used to store the last measured rotational speed of the motor shaft </p>

<p class="definition">Definition at line <a class="el" href="uStepper_8h_source.html#l00474">474</a> of file <a class="el" href="uStepper_8h_source.html">uStepper.h</a>.</p>

</div>
</div>
<a id="a602c25ed26a1d3b48ba2215a40b0edd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a602c25ed26a1d3b48ba2215a40b0edd8">&#9670;&nbsp;</a></span>encoderOffset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t uStepperEncoder::encoderOffset</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Angle of the shaft at the reference position. </p>

<p class="definition">Definition at line <a class="el" href="uStepper_8h_source.html#l00456">456</a> of file <a class="el" href="uStepper_8h_source.html">uStepper.h</a>.</p>

</div>
</div>
<a id="a479c3f88c98766f1df30eea67b907c6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a479c3f88c98766f1df30eea67b907c6f">&#9670;&nbsp;</a></span>oldAngle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t uStepperEncoder::oldAngle</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used to stored the previous measured angle for the speed measurement, and the calculation of angle moved from reference position </p>

<p class="definition">Definition at line <a class="el" href="uStepper_8h_source.html#l00461">461</a> of file <a class="el" href="uStepper_8h_source.html">uStepper.h</a>.</p>

</div>
</div>
<a id="a1eea748427c45b7792c61b0e44821abe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eea748427c45b7792c61b0e44821abe">&#9670;&nbsp;</a></span>revolutions</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int16_t uStepperEncoder::revolutions</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This variable contains the number of revolutions in either direction, since last home position was set. negative numbers corresponds to CCW turns, and positive to CW turns </p>

<p class="definition">Definition at line <a class="el" href="uStepper_8h_source.html#l00470">470</a> of file <a class="el" href="uStepper_8h_source.html">uStepper.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/thomas/Dropbox/Arduino/libraries/uStepper/src/<a class="el" href="uStepper_8h_source.html">uStepper.h</a></li>
<li>/home/thomas/Dropbox/Arduino/libraries/uStepper/src/<a class="el" href="uStepper_8cpp_source.html">uStepper.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 10 2018 20:22:00 for uStepper by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
